<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Manual Payment Gateway</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5f5f5;
      padding: 20px;
    }
    .container {
      max-width: 420px;
      margin: auto;
      background: #fff;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    h2 { text-align: center; }
    .logo-box { text-align: center; margin-bottom: 15px; }
    .logo-box img { width: 90px; display: none; margin: auto; }

    select, input {
      width: 100%; padding: 10px; margin: 8px 0;
      border: 1px solid #ccc; border-radius: 6px; font-size: 16px;
    }

    button {
      width: 100%; padding: 12px; background: #d9005b;
      color: white; border: none; font-size: 17px;
      border-radius: 8px; cursor: pointer;
    }
    button:hover { opacity: 0.9; }

    /* Modal Styles */
    #successModal {
      display: none;
      position: fixed;
      top:0; left:0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }
    #successModal .modal-content {
      background: #fff;
      padding: 20px;
      border-radius: 12px;
      max-width: 400px;
      width: 90%;
      text-align: center;
      position: relative;
    }
    #successModal .close-btn {
      position: absolute;
      top: 10px;
      right: 15px;
      cursor: pointer;
      font-size: 20px;
    }
    #successModal p {
      font-weight: bold;
      font-size: 16px;
      color: #006400;
    }
  </style>
</head>
<body>

<div class="container">
  <h2>Manual Payment Gateway</h2>

  <!-- Logos -->
  <div class="logo-box">
    <img id="bkashLogo" src="payment/bkash.png" />
    <img id="nagadLogo" src="payment/nagad.png" />
    <img id="rocketLogo" src="payment/rock.png" />
  </div>

  <div id="paymentNumberBox"
       style="display:none; padding:10px; background:#f0f0f0; border-radius:8px; margin-bottom:10px; font-weight:bold;">
    Send money to:
    <span id="paymentNumber"></span>
    <span onclick="copyNumber()" style="cursor:pointer; float:right; font-size:20px;">üìã</span>
  </div>

  <!-- FORM START -->
  <form id="paymentForm">

    <input type="hidden" name="access_key" value="6466e4bd-9561-49ec-9983-7423829d88db">

    <label>Payment Method ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®:</label>
    <select id="paymentMethod" name="payment_method" onchange="showLogo()" required>
      <option value="">-- Select --</option>
      <option value="bKash">bKash</option>
      <option value="Nagad">Nagad</option>
      <option value="Rocket">Rocket</option>
    </select>

    <input type="hidden" name="payment_send_to" id="paymentSendTo">

    <label>Type:</label>
    <select name="type">
      <option>Send Money</option>
      <option>Cash Out</option>
    </select>

    <label>Amount:</label>
    <input type="number" name="amount" placeholder="Amount ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®" required />

    <label>Your Number:</label>
    <input type="text" name="user_number" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®" required />

    <label>Transaction ID:</label>
    <input type="text" name="txnid" placeholder="TxnID ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®" required />

    <button type="submit" id="submitBtn">Submit Payment</button>

  </form>
  <!-- FORM END -->

</div>

<!-- Success Modal -->
<div id="successModal">
  <div class="modal-content">
    <span class="close-btn" id="closeModal">‚úñ</span>
    <p>
      ‚úÖ ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§<br>
      ‡¶è‡¶ï‡¶ü‡ßÅ ‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®... ‡¶¶‡ßç‡¶∞‡ßÅ‡¶§ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶∞‡ßÅ‡¶≠ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶¨‡ßá‡•§<br>
      FiberlinkBD ‡¶∏‡¶æ‡¶•‡ßá ‡¶•‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ß‡¶®‡ßç‡¶Ø‡¶¨‡¶æ‡¶¶ ‚ù§
    </p>
  </div>
</div>

<script>
  function showLogo() {
    const method = document.getElementById("paymentMethod").value;
    const numBox = document.getElementById("paymentNumberBox");
    const numSpan = document.getElementById("paymentNumber");
    const hiddenInput = document.getElementById("paymentSendTo");

    // Hide all logos
    document.getElementById("bkashLogo").style.display = "none";
    document.getElementById("nagadLogo").style.display = "none";
    document.getElementById("rocketLogo").style.display = "none";
    numBox.style.display = "none";

    if (method === "bKash") {
      document.getElementById("bkashLogo").style.display = "block";
      numSpan.textContent = "01516519535";
      hiddenInput.value = "01516519535";
      numBox.style.display = "block";
    }
    if (method === "Nagad") {
      document.getElementById("nagadLogo").style.display = "block";
      numSpan.textContent = "01571434752";
      hiddenInput.value = "01571434752";
      numBox.style.display = "block";
    }
    if (method === "Rocket") {
      document.getElementById("rocketLogo").style.display = "block";
      numSpan.textContent = "01775987080";
      hiddenInput.value = "01775987080";
      numBox.style.display = "block";
    }
  }

  function copyNumber() {
    const number = document.getElementById("paymentNumber").textContent;
    navigator.clipboard.writeText(number);
    alert("Number Copied!");
  }

  // Submit Form with Web3Forms
  document.getElementById("paymentForm").addEventListener("submit", async function(e) {
    e.preventDefault();

    const btn = document.getElementById("submitBtn");
    btn.disabled = true;
    btn.textContent = "Submitting...";

    let formData = new FormData(this);

    try {
      const response = await fetch("https://api.web3forms.com/submit", {
        method: "POST",
        body: formData
      });

      const result = await response.json();

      if (result.success) {
        // Show success modal
        document.getElementById("successModal").style.display = "flex";
        this.reset();
        document.getElementById("paymentNumberBox").style.display = "none";
      } else {
        alert("Something went wrong! Try again.");
      }
    } catch (error) {
      alert("Error submitting form. Please try again.");
      console.error(error);
    }

    btn.disabled = false;
    btn.textContent = "Submit Payment";
  });

  // Close modal on cross click
  document.getElementById("closeModal").addEventListener("click", function() {
    document.getElementById("successModal").style.display = "none";
  });

  // Close modal on backdrop click
  document.getElementById("successModal").addEventListener("click", function(e) {
    if(e.target === this){
        this.style.display = "none";
    }
  });
</script>

</body>
</html>